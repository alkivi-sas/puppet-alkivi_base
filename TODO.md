* fix relationship declaration, this is a mess
* try to improve global architecture to be more flexible
